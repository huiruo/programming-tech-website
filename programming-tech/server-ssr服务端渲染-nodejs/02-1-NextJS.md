

create-react-app，直接 yarn build 完成后，将 build 目录下的 index.html 作为入口文件，再通过 nginx 的路径去访问我们的项目。

Next.js 的 dockerFile 格式是和 Node.js 服务的格式是类似的，那么本质上，Next.js 其实就是一个 Node 后端服务，所以运行生产环境时，访问yarn start打开的端口来访问我们的应用。

## NextJS
Nextjs 是一个构建 React 应用的框架。

开箱即用，它为您提供服务器端渲染、静态站点生成、无服务器功能等等。

它是一个工具箱，为您提供创建高性能web应用程序所需的一切。

### 使用NextJS的优势
1.快速。 由于服务器端渲染和静态站点生成
服务端渲染（SSR) 优缺点
```
对于使用较慢设备的用户，这可能导致更快的加载时间。
```

2.它易于部署

3.当搜索引擎优化
在创建电子商务网站时，搜索引擎优化比以往任何时候都更加重要。
由于服务器端渲染，NextJS在这个技术大放异彩。

## 1.初代的服务端渲染
```
服务器接收到请求之后，到数据库查询数据，将数据丢到后端的组件模板（php、asp、jsp等）中，并渲染成HTML片段，接着服务器在组装这些HTML片段，组成一个完整的HTML，最后返回给浏览器
```

明显的缺点，每次更新页面的数据，就得重新请求、查数据库、重新组装html

## 2.AJAX 的出现
```
前后端分离，前端的先展现一个没有数据的页面，再去请求数据，然后进行动态渲染，完成页面展示。在这过程中，网页需要更新的就只有数据的部分内容。也就是 CSR（客户端渲染）。这也就是 create-react-app 的那一套方案。
```

## 3.服务端渲染
- 随着应用复杂程度的提高，js 的代码体积也越来越臃肿，导致首屏渲染速度明显的下降。
- seo

### 3-1.使用 nodejs 在服务器端完成页面的渲染
浏览器请求 URL，根据不同的路由，向服务器请求不同的数据，然后服务器拼接一个携带了数据的html字符串，返回给浏览器。同时浏览器执行js脚本，给页面的元素绑定对应的事件，使页面可以进行交互。


## 3-2.test 完成 React 组件的服务端渲染
见 02-01-test-react-ssr.md